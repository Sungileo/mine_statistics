# 도수분포표와 평균·분산

## 계급값으로 평균·분산 구하기

도수분포표에서는 실제 데이터값은 사라지고 데이터가 어느 계급에 속하는지의 정보만 남는다. 그러나 **계급값을 이용**하여 데이터의 대략적인 평균 분산값을 계산할 수는 있다.

데이터는 [2장 도수분포표](https://sungileo.github.io/mine_statistics/01_descriptive_statistics/freq_table.html "2장 도수분포표")에서 살펴본 데이터와 같다.

예를 들어, 계급 `20이상 30 미만` 구간의 도수는 1이므로, 데이터가 25인 사람이 1명이라고 계산하는 것이다.

```{r}
# 데이터 생성
set.seed(123) # 랜덤 시드 고정
data <- rnorm(100, mean = 50, sd = 10) # 평균 50, 표준편차 10인 정규 분포를 따르는 데이터 100개 생성
breaks <- seq(20, 80, by = 10)
freq_table <- table(cut(data, breaks = breaks, right = FALSE))
df <- data.frame(freq_table)
df$Rf <- df$Freq/100
df
```

그러면 평균은 다음과 같이 계산할 수 있다.

$\frac{25\times1+35\times13+45\times34+55\times35+65\times14+75\times3}{100}$

```{r}
sum(df$Freq*c(25,35,45,55,65,75))/100
```


분산은 편차 제곱의 평균이므로 다음과 같이 계산할 수 있다

$\frac{(25-50.7)^2\times1+(35-50.7)^2\times13+(45-50.7)^2\times34+(55-50.7)^2\times35+(65-50.7)^2\times14+(75-50.7)^2\times3}{100}$

```{r}
sum(df$Freq*(c(25,35,45,55,65,75)-50.7)**2)/100
```

## 상대도수로 평균·분산 구하기

상대도수를 이용하여 평균과 분산을 계산하면 다음과 같으며, 도수를 이용해 계산한 값과 같다는 것을 알 수 있다.

```{r}
cat("Mean : ",sum(df$Rf*c(25,35,45,55,65,75)),"\n","Variance : ",sum((df$Rf*(c(25,35,45,55,65,75)-50.7)**2)), sep = "")
```

## 실제 값과 도수분포표로 구한 값 사이에는 오차가 있음

실제 데이터로 계산한 평균과 표준편차를 각각 $\overline{x},\ s_x$, 도수분포표로 계산한 평균과 표준편차를 각각 $\hat{x},\ \hat{s}_x$, 계급폭을 $d$ 라 하면 다음 식이 성립한다.

$$\lvert\overline{x}-\hat{x}\rvert \leq \frac{d}{2}\ \ \ \ \ \ \ \ \ \ \ \lvert s_x-\hat{s}_x\rvert \leq \frac{d}{2}$$

앞 식에서 계급폭이 작을수록 도수분포표로 계산한 평균과 분산이 실제 데이터의 평균과 분산에 가까워진다는 것을 알 수 있다.


데이터에 이상치가 있고, 끝 계급(--이상, --이하의 계급)의 도수가 작을 때는, 개별 값으로 계산한 평균과 분산보다 **계급값(도수분포표)으로 게산한 평균과 분산이 오히려 데이터를 정확하게 설명하는 상황도 있다**.<br>ex)소득분포 (`1000이상`이 이상치인 경우)

```{r}
df <- data.frame(c("0-99", "100-199", "200-299","300-399","400-499","500-599","1000이상"),
           c(1,2,6,10,8,5,1))
colnames(df) <- c("소득","도수")
print(df)
```








